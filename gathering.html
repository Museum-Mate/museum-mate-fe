<!DOCTYPE html>
<html lang="en">

<head>
    <title>Museum Mate | Gathering </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" href="assets/img/apple-icon.png">
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">
    <!-- Load Require CSS -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font CSS -->
    <link href="assets/css/boxicon.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <!-- Load Tempalte CSS -->
    <link rel="stylesheet" href="assets/css/templatemo.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/custom.css">
    <script defer src="assets/js/config.js"></script>
</head>

<body>
    <!-- Header -->
    <header></header>

    <!-- Start pricing -->
    <div class="container-lg py-3">
        <div class="col-md-12 m-auto text-center py-4">
            <!-- <h1 class="pricing-header h3 semi-bold-600"> 전시회, 함께 가요 🙌 </h1> -->
            <h1 class="h2 semi-bold-600 text-center mt-2"> 전시회, 함께 가요 🙌 </h1>
            <p class="pricing-footer">
                <p>

                </p>
                뮤메에서 찾는 전시메이트!
            </p>
        </div>


        <!-- <div class="row px-lg-3">
            <div class="col-md-4 pb-5 pt-sm-0 mt-5 px-xl-3">
                <div class="pricing-table card h-100 shadow-sm border-0 py-5">
                    <div class="pricing-table-body card-body rounded-pill text-center align-self-center p-md-0">
                        <i class="pricing-table-icon display-3 bx bx-package text-secondary"></i>
                        <h2 class="pricing-table-heading h5 semi-bold-600">Free Plan</h2>
                        <p>$0</p>
                        <ul class="pricing-table-body text-start text-dark px-4 list-unstyled light-300">
                            <li><i class="bx bxs-circle me-2"></i>5 Users</li>
                            <li><i class="bx bxs-circle me-2"></i>2 TB space</li>
                            <li><i class="bx bxs-circle me-2"></i>Community Forums</li>
                            <li><i class="bx bxs-circle me-2"></i>Email Support</li>
                        </ul>
                        <div class="pricing-table-footer pt-5">
                            <a href="#" class="btn rounded-pill px-4 btn-outline-primary light-300">Get Now</a>
                        </div>
                    </div>
                </div>
            </div>


            <div class="col-md-4 pt-sm-0 pt-3 px-xl-3">
                <div class="pricing-table card bg-secondary h-100 card-rounded shadow-sm border-0 py-5">
                    <div class="pricing-table-body card-body text-center text-white align-self-center p-md-0">
                        <i class="pricing-table-icon display-3 bx bx-package text-white py-3"></i>
                        <h2 class="pricing-table-heading h5 semi-bold-600">Standard Plan</h2>
                        <p>$120/Year</p>
                        <ul class="pricing-table-list text-start text-dark px-4 list-unstyled light-300">
                            <li class="text-white"><i class="bx bxs-circle me-2"></i>25 to 99 Users</li>
                            <li class="text-white"><i class="bx bxs-circle me-2"></i>10 TB space</li>
                            <li class="text-white"><i class="bx bxs-circle me-2"></i>Source Files</li>
                            <li class="text-white"><i class="bx bxs-circle me-2"></i>Live Chat</li>
                        </ul>
                        <div class="pricing-table-footer pt-5 pb-2">
                            <a href="#" class="btn rounded-pill px-4 btn-outline-light light-300">Get Now</a>
                        </div>
                    </div>
                </div>
            </div>


            <div class="col-md-4 pb-5 pt-sm-0 mt-5 px-xl-3">
                <div class="pricing-table card h-100 shadow-sm border-0 py-5">
                    <div class="pricing-table-body card-body text-center align-self-center p-md-0">
                        <i class="pricing-table-icon display-3 bx bx-package text-secondary"></i>
                        <h2 class="pricing-table-heading h5 semi-bold-600">Enterprise</h2>
                        <p>$840/Year</p>
                        <ul class="pricing-table-list text-start text-dark px-4 list-unstyled light-300">
                            <li><i class="bx bxs-circle me-2"></i>100 users or more</li>
                            <li><i class="bx bxs-circle me-2"></i>80 TB space</li>
                            <li><i class="bx bxs-circle me-2"></i>Full Access Sources</li>
                            <li><i class="bx bxs-circle me-2"></i>Live Chat</li>
                            <li><i class="bx bxs-circle me-2"></i>Customizations</li>
                        </ul>
                        <div class="pricing-table-footer pt-1">
                            <a href="#" class="btn rounded-pill px-4 btn-outline-primary light-300">Get Now</a>
                        </div>
                    </div>
                </div>
            </div>


        </div> -->
    </div>
    <!-- End Content -->

    <!-- Start Pricing Horizontal Section -->

    <!-- 메인 이미지 시작 -->
    <section class="bg-light pt-sm-0 py-5">        
        <div id="test-pixel">
            <img id="full-width" class="rounded align-items-center" src="./assets/img/gathering.svg">
        </div>
    </section>
    <!-- 메인 이미지 끝 -->

    <!-- 파티 목록 시작 -->
    <div id = "semi-title-margin" class="offset-md-1">
        <h1 id = "semi-title-margin" class="pricing-header h3 semi-bold-600"> 함께할 모임, 지금 둘러볼까요? 👀  </h1>
    </div>

    <section id="test-layout" class="container py-5">

        <!-- <h1 class="pricing-header h3 semi-bold-600"> 👀 함께할 모임, 지금 둘러볼까요? </h1> -->

        <div id = "container-test" class="this-is-card-container container py-5" >

        </div>
        
    </section>
    
    <!-- 파티 목록 끝 -->    
    <!-- Start Footer -->
    <!-- 일단 푸터 비활성화 -->
    <footer></footer>


    <!-- Bootstrap -->
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <!-- Custom -->
    <script src="assets/js/custom.js"></script>
    <!-- js code 추가 -->
    <script>
        function ajax() {
            fetch(`http://localhost:8080/api/v1/gatherings`, {
                credentials:'include'
            }).then(function(response) {

                if (response.status != 200) { // 통신 안되면
                    alert("서버와 통신에 실패했습니다. ");
                } else {
                    return response.json();
                }
                console.log(response);
            }).then(function(jsonData) { //callback
                // console.log(jsonData); // json 데이터 확인
                let data = jsonData.result.content;
                // console.log(data); //파티 모집 글 데이터만 추출되는 것을 확인

                let gatheringCards = document.querySelector(".this-is-card-container");
                
                var tag = "";
                for(let i = 0; i < data.length; i++) {
                    let id = data[i].id;
                    let postImgUrl = data[i].exhibitionMainUrl;
                    let exhibitionName = data[i].exhibitionName;
                    let dateAndTime = data[i].meetDateTime;
                    let gatheringMeetLocation = data[i].meetLocation;
                    let gatheringTitle = data[i].title;
                    let gatheredPeopleNum = data[i].currentPeople;
                    let maxGatheringNum = data[i].maxPeople;
                    let gatheringLeader = data[i].userName;
                    // console.log(data[i]);
                    // console.log(postImgUrl, exhibitionName, gatheringTitle, gatheringTitle, gatheredPeopleNum, maxGatheringNum);

                    tag += `<div class="pricing-horizontal row col-10 m-auto d-flex shadow-sm rounded overflow-hidden my-5 bg-white">
    <div class="pricing-horizontal-icon col-md-3 text-center bg-secondary text-light py-4">
        
        <img src = "${postImgUrl}" class = "exhibition_poster_image g-2 img-thumbnail"/>
        <h5 class="h5 semi-bold-600 card-footer g-2 pb-4 light-300"> ${exhibitionName}</h5> 
    </div>

    <!-- 파티 정보 넣기 -->
    <div class="pricing-horizontal-body offset-lg-1 col-auto col-md-5 col-lg-4 d-flex align-items-center pl-5 pt-lg-0 pt-4">
        <ul class="text-left px-4 list-unstyled mb-0 light-300">
            <h5 class = "p"> 🗣 ${gatheringTitle} </h6>
            <li><i class="bx bxs-circle me-2"></i> 이 때 만나요: ${dateAndTime} </li>
            <li><i class="bx bxs-circle me-2"></i> 여기서 만나요: ${gatheringMeetLocation} </li>
            <li><i class="bx bxs-circle me-2"></i> 모임장: ${gatheringLeader} </li>
        </ul>
        <div>
            
        </div>   
    </div>

    <!-- 파티 참석 인원 동그라미 넣기 -->
    <div class="pricing-horizontal-tag col-md-4 text-center pt-3 d-flex align-items-center">
        <div class="w-100 light-300">
            <!-- 현재 참석 인원 -->
            <h6>  현재 참석자 수: ${gatheredPeopleNum} / 최대인원: ${maxGatheringNum}</h6>
            <!-- 버튼 -->
            <div class = "">
                <a onclick="submitSinglePage(this, '${id}')" class="btn rounded-pill px-4 btn-outline-primary mb-3"> 더 알아보기 </a>
                <a href="#" class="btn rounded-pill px-4 btn-outline-primary mb-3"> 신청하기!🎉 </a>
            </div>
        </div>
    </div>
</div> `;

                } //end
                gatheringCards.innerHTML = tag;
            }) 
        }

        (function() {
            ajax();
        }) ();
    </script>

</body>

</html>