<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Museum Mate | Show more Exhibitions!</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="apple-touch-icon" href="assets/img/apple-icon.png" />
		<link
			rel="shortcut icon"
			type="image/x-icon"
			href="assets/img/favicon.ico" />
		<!-- Load Require CSS -->
		<link href="assets/css/bootstrap.min.css" rel="stylesheet" />
		<link
			rel="stylesheet"
			href="https://assets.ubuntu.com/v1/vanilla-framework-version-3.11.0.min.css" />

		<!-- Font CSS -->
		<link href="assets/css/boxicon.min.css" rel="stylesheet" />
		<link
			href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&display=swap"
			rel="stylesheet" />
		<!-- Load Tempalte CSS -->
		<link rel="stylesheet" href="assets/css/templatemo.css" />
		<!-- Custom CSS -->
		<link rel="stylesheet" href="assets/css/custom.css" />

		<!--
    
TemplateMo 561 Purple Buzz

https://templatemo.com/tm-561-purple-buzz

-->
	</head>

	<body>
		<!-- Header -->
		<header></header>

		<!-- Start Banner Hero -->
		<section class="bg-light">
			<div class="container py-4">
				<!-- <div class="row align-items-center justify-content-between"> -->
				<h1 class="h2 pb-3 text-primary">ì „ì‹œíšŒ ì •ë³´ ë“±ë¡</h1>
				<h3 class="h4 regular-400">ì†Œê°œí•˜ê³  ì‹¶ì€ ì „ì‹œê°€ ìˆìœ¼ì‹ ê°€ìš”?</h3>
				<p>
					ë®¤ë©”ëŠ” ì „êµ­ ëª¨ë“  ì „ì‹œ ì •ë³´ë¥¼ ì„œë¹„ìŠ¤í•˜ê¸° ìœ„í•´ ë…¸ë ¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.
					<br />
					ê·¸ëŸ¼ì—ë„ ëˆ„ë½ëœ ì „ì‹œê°€ ìˆë‹¤ë©´, ë®¤ë©”ì—ê²Œ ì•Œë ¤ì£¼ì„¸ìš”!
				</p>

				<!-- ì´ë¯¸ì§€ ì¶•ì†Œ, ê°€ìš´ë° ì •ë ¬ -->
				<div class="u-align--center">
					<img src="./assets/img/write-exhibition-pink.svg" />
				</div>
			</div>
		</section>
		<!-- End Banner Hero -->

		<!-- Start Contact -->
		<section id="write-exhibition" class="container py-5">
			<h3 class="col-12 col-xl-8 text-left text-primary pt-3">âœ¶ NOTICE âœ¶</h3>
			<p class="col-12 col-xl-8 text-left text-muted pb-5 light-300">
				(ì•ˆë‚´) ë¶€ì •í™•í•œ ì •ë³´ê°€ ì…ë ¥ë  ê²½ìš° ì›¹ì‚¬ì´íŠ¸ì— ê²Œì¬ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë‹ˆ
				ì°¸ê³  ë°”ëë‹ˆë‹¤.
			</p>

			<!-- all screens float -->

			<!-- <div class="row pb-4"> -->
			<!-- ì „ì‹œíšŒ ì •ë³´ ë“±ë¡ form ì‹œì‘ -->
			<!-- <div class="row p-divider"> -->
			<form>
				<p class="p-heading--2">âœ”ï¸ ì „ì‹œíšŒ ê¸°ë³¸ ì •ë³´</p>
				<fieldset>
					<!-- exhibition.name -->
					<div class="mb-4">
						<div class="mb-5">
							<p class="p-heading--4">ì „ì‹œíšŒ ì œëª©</p>
							<input
								type="text"
								id="exhibitionName"
								name="exampleTextInput"
								placeholder="ì‘ì„± ì˜ˆì‹œ: ì•™ë“œë ˆ ë¸Œë¼ì§ˆë¦¬ì— íŠ¹ë³„ì „" />
							<p class="p-form-help-text" id="exampleInputHelpMessage">
								ì „ì‹œì˜ ë¶€ì œëª©ì´ ìˆë‹¤ë©´, í•¨ê»˜ ì‘ì„±í•´ì£¼ì„¸ìš”.
							</p>
						</div>
					</div>

					<div class="mb-4">
						<div class="mb-5">
							<p class="p-heading--4">ëŒ€í‘œ ì´ë¯¸ì§€</p>
							<label for="Image" class="form-label">ğŸ“ íŒŒì¼ ì²¨ë¶€</label>
							<input
								class="form-control"
								type="file"
								id="MainImgformFile"
								name="imgFile"
								onchange="previewMainImg()" />
							<button onclick="clearMainImage()" class="btn btn-primary mt-3" type="button">
								delete
							</button>
						</div>
						<img id="MainImgframe" src="" class="img-fluid" />
					</div>
				</fieldset>

				<!-- <div class="col-lg-6 mb-4">
                        <div class="form-floating">
                            <input type="text" class="form-control form-control-lg light-300" id="floatingemail" name="inputemail" placeholder="Email">
                            <label for="floatingemail light-300">ì„¸ë¶€ ì •ë³´</label>
                        </div>
                    </div>End Input Email -->

				<!-- daum kakao map ë„ë¡œëª…ì£¼ì†Œ ì°¾ê¸° api ì ìš©í•˜ê¸° -->
				<p class="p-heading--2">âœ”ï¸ ì „ì‹œíšŒ ì¥ì†Œ</p>
				<fieldset>
					<div class="mb-4">
						<p class="p-heading--4">ì „ì‹œì¥ ì£¼ì†Œ</p>
						<input
							type="text"
							class="form-control form-control-lg light-300"
							id="gallery_address"
							name="inputname"
							placeholder="ì£¼ì†Œ"
							onclick="findAddr()" />
						<input
							type="text"
							class="form-control form-control-lg light-300"
							id="gallery_address_detail"
							name="inputname"
							placeholder="ìƒì„¸ ì£¼ì†Œ" />
					</div>

					<div class="mb-4">
						<p class="p-heading--4">ì „ì‹œì¥ ì´ë¦„</p>
						<input
							type="text"
							class="form-control form-control-lg light-300"
							id="gallery_name"
							name="inputname"
							placeholder="ì‘ì„± ì˜ˆì‹œ) êµ­ë¦½í˜„ëŒ€ë¯¸ìˆ ê´€" />
						<p class="p-form-help-text" id="exampleInputHelpMessage">
							ê°€ëŠ¥í•œ í•œ ìƒì„¸íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.
						</p>
					</div>
				</fieldset>

				<!-- exhibition.start_at -->
				<p class="p-heading--2">âœ”ï¸ ì „ì‹œ ì¼ì •</p>
				<fieldset>
					<div class="mb-4">
						<p class="p-heading--4">ì‹œì‘ ë‚ ì§œ</p>
						<input
							type="date"
							class="form-control form-control-lg light-300"
							id="current-date"
							name="meeting-time"
							value="" />
					</div>

					<!-- exhibition.end_at -->
					<div class="mb-4">
						<p class="p-heading--4">ì¢…ë£Œ ë‚ ì§œ</p>
						<input
							type="date"
							class="form-control form-control-lg light-300"
							id="end-date"
							name="meeting-time"
							value="" />
					</div>
				</fieldset>

				<!-- exhibition.price -->
				<!-- ê°€ê²© í¼ ë„£ê¸° -->
				<div class="mb-4">
					<p class="p-heading--2">âœ”ï¸ ì „ì‹œ í‹°ì¼“ ê°€ê²©</p>
					<!-- <span class="currency-code">ì›</span> -->
					<input
						type="text"
						id="exhibitionTicketPrice"
						class="form-control form-control-lg light-300"
						placeholder="ë¬´ë£Œ ì „ì‹œì˜ ê²½ìš° 0ì„ ì…ë ¥í•´ì£¼ì„¸ìš”." />
					<p class="p-form-help-text" id="exampleInputHelpMessage">
						í‹°ì¼“ì€ ì„±ì¸ ê¸°ì¤€ ê°€ê²©ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.
					</p>
				</div>

				<!-- exhibition.age_limit -->
				<!-- ë‚˜ì´ ì œí•œ í¼ ë„£ê¸° -->
				<div class="mb-4">
					<p class="p-heading--2">âœ”ï¸ ê´€ëŒì—°ë ¹</p>
					<div>
						<select name="exampleSelect" id="ageLimit">
							<option value="" value="" disabled="disabled" selected="">
								ì˜µì…˜ì„ ì„ íƒí•˜ì„¸ìš”.
							</option>
							<option value="ì „ì²´ ê´€ëŒê°€">ì „ì²´ ê´€ëŒê°€</option>
							<optgroup label="ì—°ë ¹ ì œí•œ">
								<option value="ì²­ì†Œë…„ ê´€ëŒë¶ˆê°€">ì²­ì†Œë…„ ê´€ëŒë¶ˆê°€</option>
								<option value="ì•„ë™, ì²­ì†Œë…„">ì•„ë™, ì²­ì†Œë…„</option>
							</optgroup>
						</select>
						<p class="p-form-help-text" id="exampleInputHelpMessage">
							ì „ì‹œ ê´€ëŒ ì—°ë ¹ì„ ì„ íƒí•´ì£¼ì„¸ìš”.
						</p>
					</div>
				</div>

				<p class="p-heading--2">âœ”ï¸ ìƒì„¸ì •ë³´</p>
				<fieldset>
					<!-- exhibition.detail_info -->
					<!-- ì…ë ¥ ì •ë³´ ì„¤ëª… ê¸€ ë„£ê¸° -->
					<div class="mb-4">
						<textarea
							id="exhibitionDetailInfo"
							name="textarea"
							rows="5"
							placeholder="ì„¸ë¶€ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."></textarea>
						<p class="p-form-help-text" id="exampleInputHelpMessage">
							ìœ„ í•­ëª© ì™¸, ì „ì‹œì— ê´€í•˜ì—¬ ì¶”ê°€í•´ì•¼ í•  ì •ë³´ë¥¼ ì…ë ¥ ë°”ëë‹ˆë‹¤.
						</p>
					</div>
					<!-- End Textarea Message -->

					<!-- íŒŒì¼ ì²¨ë¶€ ì‹œì‘ -->
					<div class="mb-4">
						<div class="mb-5">
							<p class="p-heading--4">ğŸ“ íŒŒì¼ ì²¨ë¶€</p>
							<!-- <label for="Image" class="form-label">Bootstrap 5 image Upload with Preview</label> -->
							<input
								class="form-control"
								type="file"
								id="DetailInfoImgformFile"
								name="imgFile"
								onchange="previewDetailInfoImg()" />
							<button
								onclick="clearDetailInfoImage()"
								class="btn btn-primary mt-3"
								type="button">
								delete
							</button>
						</div>
						<img id="DetailInfoImgframe" src="" class="img-fluid" />
					</div>
					<!-- íŒŒì¼ ì²¨ë¶€ ë -->
				</fieldset>

				<p class="p-heading--2">âœ”ï¸ ì•ˆë‚´ì‚¬í•­</p>
				<fieldset>
					<!-- exhibition.notice -->
					<!-- ê³µì§€ì‚¬í•­ í…ìŠ¤íŠ¸ ë“±ë¡ í¼ -->
					<!-- ì…ë ¥ ì •ë³´ ì„¤ëª… ê¸€ ë„£ê¸° -->
					<div class="mb-4">
						<textarea
							id="exhibitionNotice"
							name="textarea"
							rows="5"
							placeholder="ê³µì§€ì‚¬í•­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."></textarea>
						<p class="p-form-help-text" id="exampleInputHelpMessage">
							ê´€ëŒê°ì´ ìˆ™ì§€í•´ì•¼ í•  ì •ë³´ë¥¼ ì…ë ¥ ë°”ëë‹ˆë‹¤.
						</p>
					</div>
					<!-- End Textarea Message -->
					<div class="mb-4">
						<div class="mb-5">
							<p class="p-heading--4">ğŸ“ íŒŒì¼ ì²¨ë¶€</p>
							<!-- <label for="Image" class="form-label">Bootstrap 5 image Upload with Preview</label> -->
							<input
								class="form-control"
								type="file"
								id="NoticeImgformFile"
								name="imgFile"
								onchange="previewNoticeImg()" />
							<button onclick="clearNoticeImage()" class="btn btn-primary mt-3" type="button">
								delete
							</button>
						</div>
						<img id="NoticeImgframe" src="" class="img-fluid" />
					</div>
				</fieldset>

				<!-- ì œì¶œ ë²„íŠ¼ ì‹œì‘ -->
				<div class="col-md-12 col-12 m-auto text-end">
					<button
						type="submit"
						class="btn btn-secondary rounded-pill px-md-5 px-4 py-2 radius-0 text-light light-300">
						ë“±ë¡í•˜ê¸°
					</button>
				</div>
				<!-- ì œì¶œ ë²„íŠ¼ ë -->
			</form>
			<!-- ì „ì‹œíšŒ ì •ë³´ ë“±ë¡ form ë -->
		</section>
		<!-- End Contact -->

		<!--  Footer -->
		<!-- <footer></footer> -->

		<!-- Bootstrap -->
		<script src="assets/js/bootstrap.bundle.min.js"></script>
		<!-- Templatemo -->
		<script src="assets/js/templatemo.js"></script>
		<!-- Custom -->
		<script src="assets/js/custom.js"></script>
	</body>

	<script>
		var form = document.getElementById("write-exhibition");
		form.addEventListener("submit", function (e) {
			// auto submission of te form
			e.preventDefault();

			let name = document.getElementById("exhibitionName").value;
			let galleryLocation =
				document.getElementById("gallery_address").value +
				document.getElementById("gallery_address_detail").value;
			let galleryName = document.getElementById("gallery_name").value;
			let startDate = document.getElementById("current-date").value;
			let endDate = document.getElementById("end-date").value;
			let price = document.getElementById("exhibitionTicketPrice").value;
			let ageLimit = document.getElementById("ageLimit").value;
			let exhibitionDetailInfo = document.getElementById("exhibitionDetailInfo").value;
			let exhibitionNotice = document.getElementById("exhibitionNotice").value;

			// image Data
			// const formData = new FormData();
			let files = document.getElementsByTagName('imgFile');
			// console.log(files);
			// formData.append('mainImgUrl', files[0]);
			// formData.append('detailInfoImgUrl', files[1]);
			// formData.append('noticeImgUrl', files[2]);
			// console.log(formData);

			const mainImgUrl = document.getElementById('MainImgframe').getAttribute('src');
			const detailInfoImgUrl = document.getElementById('DetailInfoImgframe').getAttribute('src');
			const noticeImgUrl = document.getElementById('NoticeImgframe').getAttribute('src');
			console.log(mainImgUrl);
			console.log(detailInfoImgUrl);
			console.log(noticeImgUrl);
			// fetch post request

			fetch("http://localhost:8080/api/v1/exhibitions/new", {
				method: "POST",
				body: JSON.stringify({
					name: name,
					startAt: startDate,
					endAt: endDate,
					price: price,
					ageLimit: ageLimit,
					detailInfo: exhibitionDetailInfo,
					notice: exhibitionNotice,
					gallerName: galleryName,
					galleryLocation: galleryLocation,
					mainImgUrl: mainImgUrl, 
					noticeImgUrl: noticeImgUrl,
					detailInfoImgUrl: detailInfoImgUrl,
				}),
				headers: {
					Authorization: "Bearer eyJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6InRhbmdsZWQ2NjQ4QGdtYWlsLmNvbSIsImlhdCI6MTY3NTk2Njg4OSwiZXhwIjoxNjc1OTY4Njg5fQ.yl_Ktahbiuv9Jqcgpf2sxAipUIQ4p8AdFLDKlWXHi58",
					"Content-Type" : "application/json; charset=UTF-8",
				}
			})
			.then(function(response) {
				return response.json();
			})
			.then(function(data){
				console.log(data);
			})
			.then(
				success => console.log(success)
			).catch(
				error => console.log(error)
			)
			
			;
		}, true);
	</script>

	<!-- ì¹´ì¹´ì˜¤ ì£¼ì†Œ ì°¾ê¸° API -->
	<script>
		function findAddr() {
			new daum.Postcode({
				oncomplete: function (data) {
					// console.log(data);

					// íŒì—…ì—ì„œ ê²€ìƒ‰ê²°ê³¼ í•­ëª©ì„ í´ë¦­í–ˆì„ë•Œ ì‹¤í–‰í•  ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë¶€ë¶„.
					// ë„ë¡œëª… ì£¼ì†Œì˜ ë…¸ì¶œ ê·œì¹™ì— ë”°ë¼ ì£¼ì†Œë¥¼ í‘œì‹œí•œë‹¤.
					// ë‚´ë ¤ì˜¤ëŠ” ë³€ìˆ˜ê°€ ê°’ì´ ì—†ëŠ” ê²½ìš°ì—” ê³µë°±('')ê°’ì„ ê°€ì§€ë¯€ë¡œ, ì´ë¥¼ ì°¸ê³ í•˜ì—¬ ë¶„ê¸° í•œë‹¤.
					var roadAddr = data.roadAddress; // ë„ë¡œëª… ì£¼ì†Œ ë³€ìˆ˜
					var jibunAddr = data.jibunAddress; // ì§€ë²ˆ ì£¼ì†Œ ë³€ìˆ˜

					// ìš°í¸ë²ˆí˜¸ì™€ ì£¼ì†Œ ì •ë³´ë¥¼ í•´ë‹¹ í•„ë“œì— ë„£ëŠ”ë‹¤.
					// document.getElementById('gallery_address').value = data.zonecode;
					if (roadAddr !== "") {
						document.getElementById("gallery_address").value = roadAddr;
					} else if (jibunAddr !== "") {
						document.getElementById("gallery_address").value = jibunAddr;
					}
				},
			}).open();
		}
	</script>
	<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

	<!-- íŒŒì¼ ì²¨ë¶€ ë¯¸ë¦¬ë³´ê¸° -->
	<script>
		function previewMainImg() {
			MainImgframe.src = URL.createObjectURL(event.target.files[0]);
		}
		function clearMainImage() {
			document.getElementById("MainImgformFile").value = null;
			MainImgframe.src = "";
		}

		function previewDetailInfoImg() {
			DetailInfoImgframe.src = URL.createObjectURL(event.target.files[0]);
		}
		function clearDetailInfoImage() {
			document.getElementById("DetailInfoImgformFile").value = null;
			DetailInfoImgframe.src = "";
		}

		function previewNoticeImg() {
			NoticeImgframe.src = URL.createObjectURL(event.target.files[0]);
		}
		function clearNoticeImage() {
			document.getElementById("NoticeImgformFile").value = null;
			NoticeImgframe.src = "";
		}
	</script>

	<!-- dateëŠ” í˜„ì¬ ë‚ ì§œë¡œ í‘œì‹œ -->
	<script>
		var date = new Date();

		var day = date.getDate(),
			month = date.getMonth() + 1,
			year = date.getFullYear();

		month = (month < 10 ? "0" : "") + month;
		day = (day < 10 ? "0" : "") + day;

		var today = year + "-" + month + "-" + day;

		document.getElementById("current-date").value = today;
		document.getElementById("end-date").value = today;
	</script>
</html>
